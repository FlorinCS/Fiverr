<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
       <link rel="stylesheet" href="./CSS/index.css" /> 
    <title>Warenkorb</title>
</head>
<body>
    <div class="center">
    <header>
        <div class="center">
            <div id="Logo">
          
              <a style="text-decoration:none;color:rgb(60, 111, 153)" href="startseite.html"> <img id="logo" src="./FOTOS/Logo1.png" alt="Logo" /> </a>
            <h5>  <a style="text-decoration:none;color:rgb(60, 111, 153)" href="startseite.html">YourRoadStar</a></h5>
            </div>
            </div>
            <nav>
        <div id="grid">
      
          
        
          <div  class="line" id="Home"><h2 class="mainsub" style="text-align:center"><a class="it2" style="text-decoration:none;color:white" href="startseite.html">Startseite</a></h2></div>
         
        <div  class="line" id="Kontakt"><h2 class="mainsub" style="text-align:center"><a class="it2" style="text-decoration:none;color:white" href="kontakt.html">Kontakt</a></h2></div>
        <div   class="line" id="Impressum"><h2 class="mainsub" style="text-align:center"><a class="it2" style="text-decoration:none;color:white" href="impressum.html">Impressum</a></h2></div>
          <div  id="Warenkorb">
            <a style="text-decoration:none;color:rgb(60, 111, 153)" href="Warenkorb.html"><img id="warenkorb" src="./FOTOS/Warenkorb1.png" alt="Logo" /> </a>
          </div>
        </div>
        </nav>
    </header>
    </div>
<div class="center">
<main>
   <div class="center">

      <div>
        
       <h1 style="text-align:center">WARENKORB</h1><br>
      <hr><br> 
     <div id="more">
        <div id="grid4">
            <div id="ARTIKEL">
                <h2>ARTIKEL</h2>
            </div>
            <div id="STK">
                <h2>PREIS/STK</h2>
            </div>
            <div id="MENGE">
                <h2>MENGE</h2>
            </div>
            <div id="LÖSCHEN">
                <h2>LÖSCHEN</h2>
            </div>
            <div id="PREIS">
                <h2>PREIS</h2>
            </div>
     
         </div>
        </div>
       <div id="hr"><hr></div>
   
    
        <br>
        
        <div id="grid5">
            <div id="hr2"><hr></div><br>
            <div id="ZSume"><br>
                <h2>Zwischensumme</h2>
                <p>Versandkosten</p>
                <br>
            </div><br>
            <div id="GSume">
                <h1>Gesamtsumme</h1>
                <p>Alle Angaben in Euro inkl. MwSt.</p>
            </div>
            <div id="Versand">
                <h2>9,99 -€</h2>
                
            </div><br>
            <div id="Sume">
                <h1></h1>
                
            </div><br>
           
               </div>
      
               <div id="b1">
                <button  class="btn" ><a href="#"><h4>Jetzt kaufen</h4></a></button>
                
                </div>
               
     
               
</main>
</div>

<div class="center">
    <footer id="start">
      <h4>@ Name Autor 1 , Name Autor 2 - <time>2022</time></h4>
    </footer>
    </div>

    <script>
let Sume=document.getElementById("Sume")

/* Diese Funktion passiert wenn ein Produkt gelöscht wird*/
function löschen(del){
    /* Bisher wurden die Produkte in Korb gespeichert, jetzt werden sie davon gelöscht*/
    let warenkorb=JSON.parse(localStorage.getItem('warenkorb'));
    warenkorb = warenkorb.filter(function(item) {
          /* Hier checkt die Funktion ob unser Produkt von "Cube"(produkt 2) ist.
          Wenn ja dan wird "demo" true und der Button wird gezeigt auf Produkt 2 Seite */
        if((item.id==del)&&(item.name.includes("Cube"))){

            let demo=JSON.parse(localStorage.getItem('demo'));
 demo=true
 localStorage.setItem('demo', JSON.stringify(demo));
        }
    return item.id != del
   
})

localStorage.setItem('warenkorb', JSON.stringify(warenkorb));
window.location.reload();
}
/*Hier habe ich eine Funktion gemacht damit die Summe immer aktualisiert wird, wenn
ein Produkt beigefügt oder gelöscht wird*/
    let warenkorb2=JSON.parse(localStorage.getItem('warenkorb'));// Variabile wird in Local Storage ertellt
    let gesamt=0;// By default ist die Summe 0
/* Unten checkt die Funktion jeden Preis von den Items und addiert sie*/
   warenkorb2.forEach(Summe);
function Summe(item){

  gesamt+=item.preis
  Sume.innerHTML="<h1>"+gesamt+" - $</h1>";

}
  



/*Unten befindet sich eine Funktion für die Darstellung von Produkten im Warenkorb*/
var container = document.getElementById("more");

let warenkorb=JSON.parse(localStorage.getItem('warenkorb'));
/*Wie bei der Summe nutzte ich eine forEach methode für die Darstellung jedes Produkts*/
warenkorb.forEach(waren);
function waren(item){
    const para = document.createElement("p");
para.innerHTML ='<div class="center"><div id="grids"><div id="Photo"><figure><img id="Bike1" class="BikeW" src="'+item.bild_url+'" alt="Foto von E-Bike1" /><figcaption><div id="Names"><h3>'+item.name+'</h3><br><h3>'+item.preis+'-$</h3><br><p>inkl. MwSt.</p><br><p>vorrätig - in 2-3 Tage bei Ihnen</p> </div></figcaption> </figure> </div> <div id="stk1"><h3>'+item.preis+'-$</h3></div><div id="Menge"> <select name="menge" > <option value="1">1</option><option value="2">2</option><option value="3">3</option> <option value="4">4</option>  </select> </div><div id="Löschen"> <button id="bt2" class="btn" onclick="löschen('+item.id+')" ><a href="#"><h4>Löschen</h4></a></button></div> <div id="Gesamt"><h3>'+item.preis+'-$</h3></div></div><br>';
    document.getElementById("more").appendChild(para);
 
}
    </script>
</body>
</html>